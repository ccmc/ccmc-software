#################### Kameleon Converter Makefile 01.28.2008 ####################

#################### Set Your Compilers Here

CC    = gcc
F77   = gfortran

## The following two macros will hold the compiler paths as automatically 
## determined by the Makefile

CC_FULL_PATH =
F77_FULL_PATH =

#################### Default Compiler Flags - automatcially set during make

CFLAGS = 

################### DEBUG FLAG 

DEBUG_FLAG = -g

################### System Library Paths for stuff like libgfortran libm etc...
################### that may be in weird locations...

LIB_PATH = 

## Default Library PATHS
DARWIN_SPECIFIC_LIB_PATH = -L/usr/local/lib ${LIB_PATH}
SUNOS_SPECIFIC_LIB_PATH = -L/opt/SUNWspro/lib ${LIB_PATH}
LINUX_SPECIFIC_LIB_PATH = -L/usr/lib/gcc-lib/x86_64-redhat-linux/3.2.3/ ${LIB_PATH}

#################### OS SPECIFIC COMPILER FLAGS

#DARWIN_SPECIFIC_FLAGS = -lc -lm -lSystemStubs
DARWIN_SPECIFIC_FLAGS = -lc -lm
SUNOS_SPECIFIC_FLAGS = -lF77 -lsunmath -lfsu -lfai -lm -lc -lc2
LINUX_SPECIFIC_FLAGS = -lc -lm

#################### FORTRAN - C special library

### NOTE: lg2c has become lgfortran with gnu compiler version 4.1.1 ( gfortran )
### we need to set the F2C_SPECIAL_FLAG based on the fortran compiler 

F2C_SPECIAL_FLAG = 

#################### OS specific system commands

### suns regular grep /usr/bin/grep doesn't support the -e option so lets use 
### sed instead

SUN_GREP = sed 's/ .*//' 

### main directory structure of the Kameleon converter software

F77_SRC_DIR     = ./f77_src
C_SRC_DIR       = ./c_src
LOCAL_INC_DIR   = ./inc
LOCAL_LIB_DIR   = ./lib

#################### Dependacy PATHS ( Locations of stuff Kameleon Uses )

### CDF ----------------------- REQUIRED

#LIB_CDF      = ${LOCAL_LIB_DIR}/libcdf.a
#LIB_CDF      = /public/Linux_64/cdf27-Linux_64/lib/libcdf.a
LIB_CDF      = /public/Linux_64/cdf32-Linux_64/lib/libcdf.a
#CDF_INC      = ${LOCAL_INC_DIR}
#CDF_INC      = /public/Linux_64/cdf27-Linux_64/include
CDF_INC      = /public/Linux_64/cdf32-Linux_64/include
CDF_INC_FILE = ${CDF_INC}/cdf.h

#LIB_CXFORM      = /public/Linux_64/lib/libcxform.a
#INC_CXFORM      = /public/Linux_64/include

## the following libraries can be found here:

PUBLIC_LIB_DIR=/public/Linux_64/lib
PUBLIC_INC_DIR=/public/Linux_64/include

### ARGTABLE  ---------------- REQUIRED

#LIB_ARG_TABLE_2 	 = ${LOCAL_LIB_DIR}/libargtable2.a
#ARG_TABLE_2_INC 	 = ${LOCAL_INC_DIR}
LIB_ARG_TABLE_2 	 = ${PUBLIC_LIB_DIR}/libargtable2.a
ARG_TABLE_2_INC 	 = ${PUBLIC_INC_DIR}
ARG_TABLE_2_INC_FILE = ${ARG_TABLE_2_INC}/argtable2.h

### netCDF ------------------- OPTIONAL

LIB_NETCDF      = ${LOCAL_LIB_DIR}/libnetcdf.a
NETCDF_INC      = ${LOCAL_INC_DIR}
#LIB_NETCDF      = ${PUBLIC_LIB_DIR}/libnetcdf.a
#NETCDF_INC      = ${PUBLIC_INC_DIR}
NETCDF_INC_FILE = ${NETCDF_INC}/netcdf.h

### FITS --------------------- OPTIONAL

#LIB_FITS  			= ${LOCAL_LIB_DIR}/libcfitsio.a
#FITS_INC  			= ${LOCAL_INC_DIR}
LIB_FITS  			= ${PUBLIC_LIB_DIR}/libcfitsio.a
FITS_INC  			= ${PUBLIC_INC_DIR}
FITS_INC_FILE_1  	= ${FITS_INC}/fitsio.h
FITS_INC_FILE_2  	= ${FITS_INC}/longnam.h

### HDF --------------------- OPTIONAL
### HDF ( as in HDF4 NOT HDF5 ) 
### The HDF library is a mixture of several libraries specifically:

#LIB_MFHDF  = ${LOCAL_LIB_DIR}/libmfhdf.a
#LIB_DF     = ${LOCAL_LIB_DIR}/libdf.a
#LIB_JPEG   = ${LOCAL_LIB_DIR}/libjpeg.a
#LIB_SZ     = ${LOCAL_LIB_DIR}/libsz.a
#LIB_Z      = ${LOCAL_LIB_DIR}/libz.a

#PUBLIC_HDF_LIB_DIR=$PUBLIC_LIB_DIR
PUBLIC_HDF_LIB_DIR=/public/Linux_64/hdf-4.2.13-linux-centos7-x86_64/lib
PUBLIC_HDF_INC_DIR=/public/Linux_64/hdf-4.2.13-linux-centos7-x86_64/include

LIB_MFHDF  = ${PUBLIC_HDF_LIB_DIR}/libmfhdf.a
LIB_DF     = ${PUBLIC_HDF_LIB_DIR}/libdf.a
LIB_JPEG   = ${PUBLIC_HDF_LIB_DIR}/libjpeg.a
LIB_SZ     = ${PUBLIC_HDF_LIB_DIR}/libsz.a
LIB_Z      = ${PUBLIC_HDF_LIB_DIR}/libz.a

### HDF has a bunch of header files, reference them all together
HDF_INC = ${PUBLIC_HDF_INC_DIR}
#HDF_INC = ${LOCAL_INC_DIR}

### LIB_HDF_WITH_ALL_DEP incorporates all hdf library paths and dependencies
### into a single macro

LIB_HDF_WITH_ALL_DEP = ${LIB_MFHDF} ${LIB_DF} ${LIB_JPEG} ${LIB_SZ} ${LIB_Z}



################################################################################


################# Kameleon Read Libraries based on externaly linked dependancies

LIB_READ_UCLA = ${LOCAL_LIB_DIR}/libread_ucla_ggcm.a
LIB_READ_NETCDF = ${LOCAL_LIB_DIR}/libread_netcdf.a
LIB_READ_FITS = ${LOCAL_LIB_DIR}/libread_fits.a
LIB_READ_HDF = ${LOCAL_LIB_DIR}/libread_hdf.a

################# ALL POSSIBLE LIBRARIES TO INLCUDE INTO BUILD

LIB_ALL = ${LIB_READ_UCLA} ${LIB_CDF} ${LIB_ARG_TABLE_2} ${LIB_READ_NETCDF} ${LIB_NETCDF_LINK} ${LIB_READ_FITS} ${LIB_FITS_LINK} ${LIB_READ_HDF} ${LIB_HDF_LINK}

################################################################################
################################################################################
################################################################################
##################### ADVANCED USERS ONLY BEYOND THIS POINT ####################
################################################################################
################################################################################
################################################################################

UCLA_READ_F77_SRC =  ${F77_SRC_DIR}/datf11.f ${F77_SRC_DIR}/datf21.f ${F77_SRC_DIR}/datf31.f ${F77_SRC_DIR}/end0.f ${F77_SRC_DIR}/f77_file_close.f \
					${F77_SRC_DIR}/f77_file_open.f ${F77_SRC_DIR}/f77_file_rewind.f ${F77_SRC_DIR}/getf11.f ${F77_SRC_DIR}/getf31.f ${F77_SRC_DIR}/rdn2.f \
					${F77_SRC_DIR}/wrn2.f ${F77_SRC_DIR}/wrndec.f ${F77_SRC_DIR}/wrnenc.f

UCLA_READ_F77_OBJ = datf11.o datf21.o datf31.o end0.o f77_file_close.o f77_file_open.o f77_file_rewind.o getf11.o getf31.o rdn2.o wrn2.o wrndec.o wrnenc.o

READ_C_SRC    =     ${C_SRC_DIR}/main_conversion_driver_V5.c ${C_SRC_DIR}/cdf_status_handler.c ${C_SRC_DIR}/main_read_driver.c ${C_SRC_DIR}/main_write_driver.c \
				${C_SRC_DIR}/read_batsrus.c ${C_SRC_DIR}/read_database.c ${C_SRC_DIR}/linear_minmax_search.c ${C_SRC_DIR}/date_formatter.c ${C_SRC_DIR}/strsplit.c ${C_SRC_DIR}/read_gumics.c \
				${C_SRC_DIR}/ccmc_structure_manager.c ${C_SRC_DIR}/write_batsrus_structure.c ${C_SRC_DIR}/write_structures_2_cdf.c ${C_SRC_DIR}/write_ucla_ggcm_structure.c \
				${C_SRC_DIR}/endian_flip.c ${C_SRC_DIR}/read_ctip.c ${C_SRC_DIR}/write_enlil_structure.c ${C_SRC_DIR}/write_kpvt_structure.c ${C_SRC_DIR}/write_msfc_tvm_structure.c \
				${C_SRC_DIR}/write_mas_structure.c 	\
                                ${C_SRC_DIR}/write_gumics_structure.c 

READ_C_OBJ    = main_conversion_driver_V5.o cdf_status_handler.o main_read_driver.o main_write_driver.o read_batsrus.o read_database.o linear_minmax_search.o date_formatter.o  read_gumics.o \
			strsplit.o cxform-manual.o cxform-auto.o ccmc_structure_manager.o write_batsrus_structure.o write_structures_2_cdf.o write_ucla_ggcm_structure.o endian_flip.o read_ctip.o write_enlil_structure.o \
			write_kpvt_structure.o write_msfc_tvm_structure.o write_mas_structure.o write_gumics_structure.o

### DON'T CHANGE BLOCK
### DON"T CHANGE THE FOLLOWING "DON'T CHANGE" LINE(S), ITS A WORKAROUND
### TO DISPLAY INFO ABOUT THE TARGET BUT IS NOT USED IN
### LINKING AS THE REGULAR MACRO ie LIB_NETCDF MAYBE SET TO
### BLANK IF IT'S NOT FOUND.  THIS ALLOWS THE BUILD TO
### CONTINUE WITHOUT THE LIB BUT STILL COMPLAINS: ..libnetcdf.a: No such file or directory
###
LIB_NETCDF_LINK = ${LIB_NETCDF}
LIB_FITS_LINK = ${LIB_FITS}
LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}
###
#################### END OF DON'T CHANGE BLOCK #################

# lets check to see what fortran compiler we're using to set the F2C_SPECIAL_FLAG
# as -lg2c for g77 OR -lgfortran for gfortran

first :
	@echo ""
	@echo "Verifying Fortran Compiler as currently set --->${F77}"
	@case ${F77} in \
		"g77") make distribution \
		"F2C_SPECIAL_FLAG = -lg2c" ;;\
		"gfortran") make distribution \
		"F2C_SPECIAL_FLAG = -lgfortran" ;;\
		*) make distribution ;;\
	esac


# check for libnetcdf.a to determine how we build... 
# call with_netcdf to build with NETCDF with_out_netcdf to NOT build with NETCDF

distribution:
	@echo ""
	@echo "netCDF Library Dependency Check..."
	@echo "Checking for libnetcdf.a as currently set --->${LIB_NETCDF}"
	@echo "Checking for netcdf.h as currently set --->${NETCDF_INC_FILE}"
	@if \
	[ ! -r ${LIB_NETCDF}  ] ; \
	then \
	make with_out_netcdf \
	"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " ;\
	elif \
	[ ! -r ${NETCDF_INC_FILE}  ] ; \
	then \
	make with_out_netcdf \
	"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " ;\
	else \
	make with_netcdf \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" ;\
	fi

# check for libcfitsio.a to determine how we build...
# with_netcdf-with_fits to build with NETCDF & FITS
# with_netcdf-with_out_fits to build with NETCDF & NOT FITS
# with_out_netcdf-with_fits to build with NO NETCDF & FITS
# with_out_netcdf-with_out_fits to build with NO NETCDF & NO FITS

with_netcdf:
	@echo ""
	@echo "FITS Library Dependency Check..."
	@echo "Checking for libcfitsio.a as currently set --->${LIB_FITS}"
	@echo "Checking for fitsio.h as currently set --->${FITS_INC_FILE_1}"
	@echo "Checking for longnam.h as currently set --->${FITS_INC_FILE_2}"
	@if \
	[ ! -r ${LIB_FITS}  ] ; \
	then \
	make with_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	elif \
	[ ! -r ${FITS_INC_FILE_1}  ] ; \
	then \
	make with_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	elif \
	[ ! -r ${FITS_INC_FILE_2}  ] ; \
	then \
	make with_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	else \
	make with_netcdf-with_fits \
	"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" ;\
	fi

#	@echo "Checking for libcfitsio.a: "`find ./lib -name libcfitsio.a`
#	@case `find ./lib -name libcfitsio.a` in \
#		"./lib/libcfitsio.a") make with_netcdf-with_fits \
#		"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" ;;\
#		*) make with_netcdf-with_out_fits \
#		"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;;\
#	esac

with_out_netcdf:
	@echo ""
	@echo "FITS Library Dependency Check..."
	@echo "Checking for libcfitsio.a as currently set --->${LIB_FITS}"
	@echo "Checking for fitsio.h as currently set --->${FITS_INC_FILE_1}"
	@echo "Checking for longnam.h as currently set --->${FITS_INC_FILE_2}"
	@if \
	[ ! -r ${LIB_FITS}  ] ; \
	then \
	make with_out_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	elif \
	[ ! -r ${FITS_INC_FILE_1}  ] ; \
	then \
	make with_out_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	elif \
	[ ! -r ${FITS_INC_FILE_2}  ] ; \
	then \
	make with_out_netcdf-with_out_fits \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " ;\
	else \
	make with_out_netcdf-with_fits \
	"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" ;\
	fi


#	@echo "Checking for libcfitsio.a: "`find ./lib -name libcfitsio.a`
#	@case `find ./lib -name libcfitsio.a` in \
#		"./lib/libcfitsio.a") make with_out_netcdf-with_fits \
#		"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
#		"LIB_NETCDF_LINK = " "LIB_FITS_LINK = ${LIB_FITS}" -DFITS;;\
#		*) make with_out_netcdf-with_out_fits \
#		"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
#		"LIB_NETCDF_LINK = " "LIB_FITS_LINK = " ;;\
#	esac

# check for libmfhdf.a to determine how we build

with_netcdf-with_fits:
	@echo ""
	@echo "HDF4 Library Dependency Check..."
	@echo "Checking for libmfhdf.a as currently set --->${LIB_MFHDF}"
	@echo "Checking for libdf.a as currently set --->${LIB_DF}"
	@if \
	[ ! -r ${LIB_MFHDF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ";\
	elif \
	[ ! -r ${LIB_DF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ";\
	else \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -DFITS -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";\
	fi

#	@echo ""
#	@echo "HDF Library Dependency Check..."
#	@echo "Checking for libmfhdf.a: "`find ./lib -name libmfhdf.a`
#	@case `find ./lib -name libmfhdf.a` in \
#		"./lib/libmfhdf.a") make kameleon \
#		"CFLAGS = -D$(F77) -DNETCDF -DFITS -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";;\
#		*) make kameleon \
#		"CFLAGS = -D$(F77) -DNETCDF -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ";;\
#	esac

with_netcdf-with_out_fits:
	@echo ""
	@echo "HDF4 Library Dependency Check..."
	@echo "Checking for libmfhdf.a as currently set --->${LIB_MFHDF}"
	@echo "Checking for libdf.a as currently set --->${LIB_DF}"
	@if \
	[ ! -r ${LIB_MFHDF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " " LIB_HDF_LINK = ";\
	elif \
	[ ! -r ${LIB_DF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " " LIB_HDF_LINK = ";\
	else \
	make kameleon \
	"CFLAGS = -D$(F77) -DNETCDF -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " " LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";\
	fi

#	@echo ""
#	@echo "HDF Library Dependency Check..."
#	@echo "Checking for libmfhdf.a: "`find ./lib -name libmfhdf.a`
#	@case `find ./lib -name libmfhdf.a` in \
#		"./lib/libmfhdf.a") make kameleon \
#		"CFLAGS = -D$(F77) -DNETCDF -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " " LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";;\
#		*) make kameleon \
#		"CFLAGS = -D$(F77) -DNETCDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
#		"LIB_NETCDF_LINK    = ${LIB_NETCDF}" "LIB_FITS_LINK = " " LIB_HDF_LINK = ";;\
#	esac


with_out_netcdf-with_fits:
	@echo ""
	@echo "HDF4 Library Dependency Check..."
	@echo "Checking for libmfhdf.a as currently set --->${LIB_MFHDF}"
	@echo "Checking for libdf.a as currently set --->${LIB_DF}"
	@if \
	[ ! -r ${LIB_MFHDF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = ${LIB_FITS}" " LIB_HDF_LINK = ";\
	elif \
	[ ! -r ${LIB_DF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = ${LIB_FITS}" " LIB_HDF_LINK = ";\
	else \
	make kameleon \
	"CFLAGS = -D$(F77) -DFITS -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = ${LIB_FITS}" " LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";\
	fi

#	@echo ""
#	@echo "HDF Library Dependency Check..."
#	@echo "Checking for libmfhdf.a: "`find ./lib -name libmfhdf.a`
#	@case `find ./lib -name libmfhdf.a` in \
#		"./lib/libmfhdf.a") make kameleon \
#		"CFLAGS = -D$(F77) -DFITS -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
#		"LIB_NETCDF_LINK    = " "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";;\
#		*) make kameleon \
#		"CFLAGS = -D$(F77) -DFITS -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
#		"LIB_NETCDF_LINK    = " "LIB_FITS_LINK = ${LIB_FITS}" "LIB_HDF_LINK = ";;\
#	esac

with_out_netcdf-with_out_fits:
	@echo ""
	@echo "HDF4 Library Dependency Check..."
	@echo "Checking for libmfhdf.a as currently set --->${LIB_MFHDF}"
	@echo "Checking for libdf.a as currently set --->${LIB_DF}"
	@if \
	[ ! -r ${LIB_MFHDF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = " " LIB_HDF_LINK = ";\
	elif \
	[ ! -r ${LIB_DF}  ] ; \
	then \
	make kameleon \
	"CFLAGS = -D$(F77) -Wall -ansi -Wno-unused-variable -Wno-missing-braces" \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = " " LIB_HDF_LINK = ";\
	else \
	make kameleon \
	"CFLAGS = -D$(F77) -DKAMELEON_WITH_HDF -Wall -ansi -Wno-unused-variable -Wno-missing-braces"  \
	"LIB_NETCDF_LINK = " "LIB_FITS_LINK = " " LIB_HDF_LINK = ${LIB_HDF_WITH_ALL_DEP}";\
	fi



# by now we should know how to build kameleon and what external libraries are
# available to us

# automatically determine OS

kameleon:
	@echo ""
	@echo "Automatically Determining Operating System to set OS Specific Flags: "`uname`
	@case `uname` in \
		"Darwin") make kameleon-4-mac \
				"FLAGS=${LIB_ALL} -I${LOCAL_INC_DIR} ${DARWIN_SPECIFIC_LIB_PATH} ${DARWIN_SPECIFIC_FLAGS}" "CC_FULL_PATH = `which ${CC} | grep -v -e ^no`" "F77_FULL_PATH = `which ${F77} | grep -v -e ^no`";;\
		"Linux") make kameleon-4-linux \
				"FLAGS=${LIB_ALL} -I${LOCAL_INC_DIR} ${LINUX_SPECIFIC_LIB_PATH} ${LINUX_SPECIFIC_FLAGS}" "CC_FULL_PATH = `which ${CC} | grep -v -e ^no`" "F77_FULL_PATH = `which ${F77} | grep -v -e ^no`";;\
		"SunOS") make kameleon-4-sun \
				"FLAGS=${LIB_ALL} -I${LOCAL_INC_DIR} ${SUNOS_SPECIFIC_LIB_PATH} ${SUNOS_SPECIFIC_FLAGS}" "CC_FULL_PATH = `which ${CC} | ${SUN_GREP}`" "F77_FULL_PATH = `which ${F77} | ${SUN_GREP}`";;\
		CYGWIN*) make kameleon-4-linux \
				"FLAGS=${LIB_ALL} -I${LOCAL_INC_DIR} ${LINUX_SPECIFIC_LIB_PATH} ${LINUX_SPECIFIC_FLAGS}" "CC_FULL_PATH = `which ${CC} | grep -v -e ^no`" "F77_FULL_PATH = `which ${F77} | grep -v -e ^no`";;\
		*) echo "Current Operating System is NOT supported" ;;\
	esac


# MAC-SPECIFIC

kameleon-4-mac : ${CC} ${CDF_INC_FILE} ${LIB_CDF} ${LIB_ARG_TABLE_2} ${ARG_TABLE_2_INC_FILE} ${LIB_READ_NETCDF} ${LIB_READ_FITS} ${LIB_READ_HDF} ${READ_C_OBJ} ${LIB_READ_UCLA} 
	${CC} -o kameleon ${READ_C_OBJ} ${FLAGS} -I${ARG_TABLE_2_INC} ${F2C_SPECIAL_FLAG}
	@echo ""
	@echo "KAMELEON is ready"

# LINUX-SPECIFIC

kameleon-4-linux : ${CC} ${LIB_CDF} ${LIB_READ_NETCDF} ${LIB_READ_FITS} ${LIB_READ_HDF} ${READ_C_OBJ} ${LIB_READ_UCLA} 
	${CC} -o kameleon ${READ_C_OBJ} ${FLAGS} -I${ARG_TABLE_2_INC} ${F2C_SPECIAL_FLAG}
	@echo ""
	@echo "KAMELEON is ready"

# SUN-SPECIFIC

kameleon-4-sun : ${CC} ${LIB_CDF} ${LIB_READ_NETCDF} ${LIB_READ_FITS} ${LIB_READ_HDF} ${READ_C_OBJ} ${LIB_READ_UCLA} 
	${CC} -o kameleon ${READ_C_OBJ} ${FLAGS} -I${ARG_TABLE_2_INC} ${F2C_SPECIAL_FLAG}
	@echo ""
	@echo "KAMELEON is ready"


${LOCAL_LIB_DIR}/libread_ucla_ggcm.a : ${F77} ${UCLA_READ_F77_OBJ} read_ucla_ggcm_v3.o 
	ar rc $@ ${UCLA_READ_F77_OBJ}  read_ucla_ggcm_v3.o
	ranlib $@

#		
#libread_ucla_with_fortran_flag : 
#	@case ${F77} in \
#		"g77") make libread_ucla_with_fortran_flag \
#				"F2C_SPECIAL_FLAG = -lg2c" ;;\
#		"gfortran") make libread_ucla_with_fortran_flag \
#				"F2C_SPECIAL_FLAG = -lgfortran" ;;\
#		*) echo "Fortran Compiler as currently set ---> ${F77} is not gnu.." ;;\
#	esac


${LOCAL_LIB_DIR}/libread_netcdf.a    : ${LIB_NETCDF} ${NETCDF_INC_FILE} read_enlil.o
	ar rc $@ read_enlil.o ${LIB_NETCDF_LINK}
	ranlib $@

${LOCAL_LIB_DIR}/libread_fits.a    : ${LIB_FITS} ${FITS_INC_FILE_1} ${FITS_INC_FILE_2} read_kpvt.o read_msfc_tvm.o
	ar rc $@ read_kpvt.o read_msfc_tvm.o ${LIB_FITS_LINK}
	ranlib $@

${LOCAL_LIB_DIR}/libread_hdf.a : ${LIB_HDF_WITH_ALL_DEP} read_mas.o
	ar rc $@ read_mas.o ${LIB_HDF_LINK}
	ranlib $@

main_conversion_driver_V5.o : ${C_SRC_DIR}/main_conversion_driver_V5.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/main_conversion_driver_V5.c -I${LOCAL_INC_DIR} -I${CDF_INC} -I${ARG_TABLE_2_INC}

cxform-manual.o : ${C_SRC_DIR}/cxform-manual.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/cxform-manual.c -I${LOCAL_INC_DIR} -I${CDF_INC}

cxform-auto.o : ${C_SRC_DIR}/cxform-auto.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/cxform-auto.c -I${LOCAL_INC_DIR} -I${CDF_INC}

cdf_status_handler.o : ${C_SRC_DIR}/cdf_status_handler.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/cdf_status_handler.c -I${LOCAL_INC_DIR} -I${CDF_INC}

main_read_driver.o : ${C_SRC_DIR}/main_read_driver.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/main_read_driver.c -I${LOCAL_INC_DIR} -I${CDF_INC}

main_write_driver.o : ${C_SRC_DIR}/main_write_driver.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/main_write_driver.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_batsrus.o : ${C_SRC_DIR}/read_batsrus.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_batsrus.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_gumics.o : ${C_SRC_DIR}/read_batsrus.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_gumics.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_batsrus_cdf.o : ${C_SRC_DIR}/write_batsrus_cdf.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_batsrus_cdf.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_ucla_ggcm_cdf.o : ${C_SRC_DIR}/write_ucla_ggcm_cdf.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_ucla_ggcm_cdf.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_ucla_ggcm_v3.o : ${C_SRC_DIR}/read_ucla_ggcm_v3.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_ucla_ggcm_v3.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_database.o : ${C_SRC_DIR}/read_database.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_database.c -I${LOCAL_INC_DIR} -I${CDF_INC}

linear_minmax_search.o : ${C_SRC_DIR}/linear_minmax_search.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/linear_minmax_search.c -I${LOCAL_INC_DIR} -I${CDF_INC}

date_formatter.o : ${C_SRC_DIR}/date_formatter.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/date_formatter.c -I${LOCAL_INC_DIR} -I${CDF_INC}

strsplit.o : ${C_SRC_DIR}/strsplit.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/strsplit.c -I${LOCAL_INC_DIR} -I${CDF_INC}

ccmc_structure_manager.o : ${C_SRC_DIR}/ccmc_structure_manager.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/ccmc_structure_manager.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_batsrus_structure.o : ${C_SRC_DIR}/write_batsrus_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_batsrus_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_structures_2_cdf.o : ${C_SRC_DIR}/write_structures_2_cdf.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_structures_2_cdf.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_ucla_ggcm_structure.o : ${C_SRC_DIR}/write_ucla_ggcm_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_ucla_ggcm_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

endian_flip.o : ${C_SRC_DIR}/endian_flip.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/endian_flip.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_ctip.o : ${C_SRC_DIR}/read_ctip.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_ctip.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_enlil.o : ${C_SRC_DIR}/read_enlil.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_enlil.c -I${LOCAL_INC_DIR} -I${CDF_INC} -I${NETCDF_INC}

write_enlil_structure.o : ${C_SRC_DIR}/write_enlil_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_enlil_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_kpvt.o : ${C_SRC_DIR}/read_kpvt.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_kpvt.c -I${LOCAL_INC_DIR} -I${CDF_INC} -I${FITS_INC}

write_kpvt_structure.o : ${C_SRC_DIR}/write_kpvt_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_kpvt_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_msfc_tvm.o : ${C_SRC_DIR}/read_msfc_tvm.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_msfc_tvm.c -I${LOCAL_INC_DIR} -I${CDF_INC} -I${FITS_INC}

write_msfc_tvm_structure.o : ${C_SRC_DIR}/write_msfc_tvm_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_msfc_tvm_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

read_mas.o : ${C_SRC_DIR}/read_mas.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/read_mas.c -I${LOCAL_INC_DIR} -I${HDF_INC} -I${CDF_INC}

write_mas_structure.o : ${C_SRC_DIR}/write_mas_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_mas_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}

write_gumics_structure.o : ${C_SRC_DIR}/write_gumics_structure.c
	${CC} ${CFLAGS} -c ${DEBUG_FLAG} ${C_SRC_DIR}/write_gumics_structure.c -I${LOCAL_INC_DIR} -I${CDF_INC}


#### UCLA_GGCM/OPenGGCM Fortran Stuff

datf11.o : ${F77_SRC_DIR}/datf11.f
	${F77} -c ${F77_SRC_DIR}/datf11.f

datf21.o : ${F77_SRC_DIR}/datf21.f
	${F77} -c ${F77_SRC_DIR}/datf21.f

datf31.o : ${F77_SRC_DIR}/datf31.f
	${F77} -c ${F77_SRC_DIR}/datf31.f

end0.o : ${F77_SRC_DIR}/end0.f
	${F77} -c ${F77_SRC_DIR}/end0.f

f77_file_close.o : ${F77_SRC_DIR}/f77_file_close.f
	${F77} -c ${F77_SRC_DIR}/f77_file_close.f

f77_file_open.o : ${F77_SRC_DIR}/f77_file_open.f
	${F77} -c ${F77_SRC_DIR}/f77_file_open.f

f77_file_rewind.o : ${F77_SRC_DIR}/f77_file_rewind.f
	${F77} -c ${F77_SRC_DIR}/f77_file_rewind.f

getf11.o : ${F77_SRC_DIR}/getf11.f
	${F77} -c ${F77_SRC_DIR}/getf11.f

getf31.o : ${F77_SRC_DIR}/getf31.f
	${F77} -c ${F77_SRC_DIR}/getf31.f

rdn2.o : ${F77_SRC_DIR}/rdn2.f
	${F77} -c ${F77_SRC_DIR}/rdn2.f

wrn2.o : ${F77_SRC_DIR}/wrn2.f
	${F77} -c ${F77_SRC_DIR}/wrn2.f

wrndec.o : ${F77_SRC_DIR}/wrndec.f
	${F77} -c ${F77_SRC_DIR}/wrndec.f

wrnenc.o : ${F77_SRC_DIR}/wrnenc.f
	${F77} -c ${F77_SRC_DIR}/wrnenc.f


######################### DEPENDENCY CHECKS ####################################



###### Check for presence of specified CC compiler

# [ -x "${CC_FULL_PATH}" ] ; \

${CC} :
	@echo ""
	@echo "checking for c compiler as curently set --->${CC}<---"
	@echo "verifying full path as found using 'which ${CC}' --->`which ${CC}`<---"
	@if \
	[ ! -x "`which ${CC} | ${SUN_GREP}`" ] ; \
	then \
	make c_compiler_error ; \
	else \
	echo "${CC} compiler OK..." ; \
	echo "" ; \
	fi

###### Check for presence of specified FORTRAN compiler if found, check if it is
###### either g77 or gfortran and set the coorseponding -lg2c or -lgfortran flag
###### using the F2C_SPECIAL_FLAG macro

# [ -z "${F77_FULL_PATH}" ] ; \

${F77} :
	@echo ""
	@echo "checking for fortran compiler as curently set --->${F77}<---"
	@echo "verifying full path as found using 'which ${F77}' --->`which ${F77}`<---"
	@if \
	[ ! -x `which ${F77} | ${SUN_GREP}` ] ; \
	then \
	make fortran_compiler_error ; \
	else \
	echo "${F77} compiler OK..." ; \
	echo "" ; \
	fi


c_compiler_error :
	@echo "ERROR!!!!!!!!!! ${CC} compiler not found as currently set ---> ${CC_FULL_PATH}"
	@echo "YOU MAY NEED TO set CC macro ie. make CC=cc"
	@echo ""
	@echo ""
	@echo "...Type make help for details..."
	@echo ""
	$(error ERROR!!!!!!!!!! ${CC} compiler not found as currently set ---> ${CC_FULL_PATH} <--- you may need to set CC macro ie. make CC=gcc ...Type make help for details... )

fortran_compiler_error :
	@echo ""
	@echo "ERROR!!!!!!!!!! ${F77} compiler not found as currently set ---> ${F77_FULL_PATH} <--"
	@echo "YOU MAY NEED TO set F77 macro ie. make F77=gfortran"
	@echo ""
	@echo "**NOTE: Some Model Read Modules require a Fortran Compiler, Please specify a valid Fortran Compiler**"
	@echo ""
	@echo "...Type make help for details..."
	@echo ""


##### Check for presence of CDF library

${LIB_CDF} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "ERROR!!!!!!!!!! $@ not found in LIB_CDF ENV variable as currently set ---> ${LIB_CDF}"
	@echo "YOU MAY NEED TO INSTALL CDF library or set LIB_CDF macro ie. make LIB_CDF=/Applications/cdf31-dist/lib/libcdf.a"
	@echo "Build has died...see below---vv"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""
	$(error ERROR!!!!!!!!!! $@ not found in LIB_CDF macro as currently set --->${LIB_CDF}<--- ... YOU MAY NEED TO INSTALL CDF library or set LIB_CDF macro ie. make LIB_CDF=/Applications/cdf31-dist/lib/libcdf.a)

##### Check for presence of CDF include file

${CDF_INC_FILE} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "ERROR!!!!!!!!!! cdf.h not found in CDF_INC directory as currently set ---> ${CDF_INC}"
	@echo "YOU MAY NEED TO INSTALL CDF library or set CDF_INC macro ie. make CDF_INC=/Applications/cdf31-dist/include"
	@echo "Build has died...see below---vv"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""
	$(error ERROR!!!!!!!!!! cdf.h not found in CDF_INC directory as currently set --->${CDF_INC}<--- YOU MAY NEED TO INSTALL CDF library or set CDF_INC macro ie. make CDF_INC=/Applications/cdf31-dist/include)


##### Check for presence of Argtable 2 library

${LIB_ARG_TABLE_2} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "ERROR!!!!!!!!!! $@ not found in LIB_ARG_TABLE_2 ENV variable as currently set ---> ${LIB_ARG_TABLE_2}"
	@echo "YOU MAY NEED TO INSTALL Argtable 2 library or set LIB_ARG_TABLE_2 macro ie. make LIB_ARG_TABLE_2=/Users/mmaddox/DOWNLOAD_AND_BUILD_DIR/argtable2-6/src/libargtable2.a"
	@echo "Build has died...see below---vv"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""
	$(error ERROR!!!!!!!!!! $@ not found in LIB_ARG_TABLE_2 macro as currently set --->${LIB_ARG_TABLE_2}<--- ... YOU MAY NEED TO INSTALL Argtable 2 library or set LIB_ARG_TABLE_2 macro ie. make LIB_ARG_TABLE_2=/Users/mmaddox/DOWNLOAD_AND_BUILD_DIR/argtable2-6/src/libargtable2.a)

##### Check for presence of Argtable 2 Include File

${ARG_TABLE_2_INC_FILE} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "ERROR!!!!!!!!!! argtable2.h not found in ARG_TABLE_2_INC Directory as currently set ---> ${ARG_TABLE_2_INC}"
	@echo "YOU MAY NEED TO INSTALL Argtable 2 library or set ARG_TABLE_2_INC macro ie. make ARG_TABLE_2_INC=/Users/mmaddox/DOWNLOAD_AND_BUILD_DIR/argtable2-6/src/"
	@echo "Build has died...see below---vv"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""
	$(error ERROR!!!!!!!!!! argtable2.h not found in ARG_TABLE_2_INC macro as currently set --->${ARG_TABLE_2_INC}<--- ... YOU MAY NEED TO INSTALL Argtable 2 library or set ARG_TABLE_2_INC macro ie. make ARG_TABLE_2_INC=/Users/mmaddox/DOWNLOAD_AND_BUILD_DIR/argtable2-6/src/)

##### Check for presence of NETCDF library

${LIB_NETCDF} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_NETCDF ENV variable as currently set ---> ${LIB_NETCDF}"
	@echo "converter will not be able to process any model output ( such as ENLIL ) written in netCDF format"
	@echo "YOU MAY NEED TO INSTALL the NETCDF library or set LIB_NETCDF macro ie. make LIB_NETCDF=/usr/local/lib/libnetcdf.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

##### Check for presence of NETCDF include file

${NETCDF_INC_FILE} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! netcdf.h not found in NETCDF_INC ENV variable as currently set ---> ${NETCDF_INC}"
	@echo "converter will not be able to process any model output ( such as ENLIL ) written in netCDF format"
	@echo "YOU MAY NEED TO INSTALL the NETCDF library or set NETCDF_INC macro ie. make NETCDF_INC=/usr/local/include/"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

##### Check for presence of FITS library

${LIB_FITS} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_FITS ENV variable as currently set ---> ${LIB_FITS}"
	@echo "converter will not be able to process any files ( such as KPVT ) written in FITS format"
	@echo "YOU MAY NEED TO INSTALL the FITS library or modify the Makefile to point to correct copy of libcfitsio.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

##### Check for presence of FITS  include file 1

${FITS_INC_FILE_1} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! fitsio.h not found in FITS_INC ENV variable as currently set ---> ${FITS_INC}"
	@echo "converter will not be able to process any model output ( such as KPVT, MSFC_TVM ) written in FITS format"
	@echo "YOU MAY NEED TO INSTALL the FITS library or set FITS_INC macro ie. make FITS_INC=/usr/local/include/"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

##### Check for presence of FITS  include file 2

${FITS_INC_FILE_2} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! longnam.h not found in FITS_INC ENV variable as currently set ---> ${FITS_INC}"
	@echo "converter will not be able to process any model output ( such as KPVT, MSFC_TVM ) written in FITS format"
	@echo "YOU MAY NEED TO INSTALL the FITS library or set FITS_INC macro ie. make FITS_INC=/usr/local/include/"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

##### Check for presence of HDF library and all its dependencies

${LIB_MFHDF} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_MFHDF ENV variable as currently set ---> ${LIB_MFHDF}"
	@echo "converter will not be able to process any files ( such as Mas ) written in hdf format"
	@echo "YOU MAY NEED TO INSTALL the HDF library ( and dependencies: libdf.a, libmfhdf.a, libjpeg.a, libsz.a,"
	@echo "and libz.a ) or modify the Makefile to point to correct copy of libdf.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

${LIB_DF} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_DF ENV variable as currently set ---> ${LIB_DF}"
	@echo "converter will not be able to process any files ( such as Mas ) written in hdf format"
	@echo "YOU MAY NEED TO INSTALL the HDF library ( and dependencies: libdf.a, libmfhdf.a, libjpeg.a, libsz.a,"
	@echo "and libz.a ) or modify the Makefile to point to correct copy of libdmfhdf.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

${LIB_JPEG} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_JPEG ENV variable as currently set ---> ${LIB_JPEG}"
	@echo "converter will not be able to process any files ( such as Mas ) written in hdf format"
	@echo "YOU MAY NEED TO INSTALL the HDF library ( and dependencies: libdf.a, libmfhdf.a, libjpeg.a, libsz.a,"
	@echo "and libz.a ) or modify the Makefile to point to correct copy of libjpeg.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

${LIB_SZ} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_SZ ENV variable as currently set ---> ${LIB_SZ}"
	@echo "converter will not be able to process any files ( such as Mas ) written in hdf format"
	@echo "YOU MAY NEED TO INSTALL the HDF library ( and dependencies: libdf.a, libmfhdf.a, libjpeg.a, libsz.a,"
	@echo "and libz.a ) or modify the Makefile to point to correct copy of libsz.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

${LIB_Z} :
	@echo ""
	@echo "---------------------------------------------------------------------------------------------------"
	@echo "WARNING!!!!!!!!!! $@ not found in LIB_Z ENV variable as currently set ---> ${LIB_Z}"
	@echo "converter will not be able to process any files ( such as Mas ) written in hdf format"
	@echo "YOU MAY NEED TO INSTALL the HDF library ( and dependencies: libdf.a, libmfhdf.a, libjpeg.a, libsz.a,"
	@echo "and libz.a ) or modify the Makefile to point to correct copy of libz.a"
	@echo "---------------------------------------------------------------------------------------------------"
	@echo ""

###################### CLEANING ####################################

clean :
	rm -f ${READ_C_OBJ} ${UCLA_READ_F77_OBJ} read_ucla_ggcm_v3.o read_enlil.o read_kpvt.o read_msfc_tvm.o read_mas.o

real_clean :
	rm -f ${READ_C_OBJ} ${UCLA_READ_F77_OBJ} read_ucla_ggcm_v3.o read_enlil.o read_kpvt.o read_msfc_tvm.o read_mas.o ${LIB_READ_UCLA} ${LIB_READ_NETCDF} ${LIB_READ_FITS} ${LIB_READ_HDF} kameleon

####################### HELP ########################################


help :
	@echo ""
	@echo "*********************************** HELP ***********************************"
	@echo ""
	@echo "You can set several Makefile variables during invocation of make..."
	@echo "NOTE: The C and Fortran Compilers are set to gcc and gfortran by default, but"
	@echo "can also be specified during the invocation of make..."
	@echo ""
	@echo "Required?     Description              Variable            Example"
	@echo "--------     -----------------        ------------        ---------------------------------------------"
	@echo "   -          C Compiler               CC                  CC=gcc"
	@echo "   -          FORTRAN Compiler         F77                 F77=gfortran"
	@echo "  NO          Special Library Dir      LIB_PATH            LIB_PATH=-L/weird_library_path/lib"
	@echo "  YES         CDF Library              LIB_CDF             LIB_CDF=/Applications/cdf31-dist/lib/libcdf.a"
	@echo "  YES         CDF Include Files        CDF_INC             CDF_INC=/Applications/cdf31-dist/include/"
	@echo "  YES         ARGTABLE2 Library        LIB_ARG_TABLE_2     LIB_ARG_TABLE_2=../argtable2-6/src/libargtable2.a"
	@echo "  YES         ARGTABLE2 Include Files  ARG_TABLE_2_INC     ARG_TABLE_2_INC=../argtable2-6/src/"
	@echo "  NO          netCDF Library           LIB_NETCDF          LIB_NETCDF=/usr/local/lib/libnetcdf.a"
	@echo "  NO          netCDF Include Files     NETCDF_INC          NETCDF_INC=/usr/local/include/"
	@echo "  NO          FITS Library             LIB_FITS            LIB_FITS=../cfitsio/libcfitsio.a"
	@echo "  NO          FITS Include Files       FITS_INC            FITS_INC=../cfitsio/"
	@echo "  NO          HDF4 df Library          LIB_DF              LIB_DF=/Applications/HDF4.2.3/lib/libdf.a"
	@echo "  NO          HDF4 mfhdf Library       LIB_MFHDF           LIB_MFHDF=/Applications/HDF4.2.3/lib/libmfhdf.a"
	@echo "  NO          HDF4 Include Files       HDF_INC             HDF_INC=/Applications/HDF4.2.3/include/"
	@echo "  NO          HDF4 SZ Compression Lib  LIB_SZ              LIB_SZ=/usr/local/lib/libsz.a"
	@echo "  NO          HDF4 Z Compression Lib   LIB_Z               LIB_Z=/usr/local/lib/libz.a"
	@echo "  NO          HDF4 JPEG Dependency     LIB_JPEG            LIB_JPEG=/usr/local/lib/libjpeg.a"
	@echo "----------------------------------------------------------------------------------------------"
	@echo "Example:"
	@echo ""
	@echo "  make CC=gcc F77=gfortran CDF_INC=/Applications/cdf31-dist/include/ LIB_CDF=/Applications/cdf31-dist/lib/libcdf.a  LIB_ARG_TABLE_2=../argtable2-6/src/libargtable2.a  ARG_TABLE_2_INC=../argtable2-6/src/"
	@echo ""
	@echo "*********************************** HELP ***********************************"
	@echo ""

